%
O4000
#1 = 101 (DLINA)
#2 = 70.2 (SHIRINA)
#3 = 12.5 (RADIUS W UGLU)
#4 = 10 (RADIUS FREZJI)
#5 = 0 (POWERHNOST')
#6 = -20.71 (GLUBINA KARMANA)
#7 = 0.5 (BEZOPASNOE)
#8 = 100 (OT'EZD)
#9 = 0.8 (GLUBINA REZA)
#10 = 1.5 (PEREKRJITIE)
#500 = #3 - #4
IF [#500 LT 0] THEN #500 = 0
#501 = 0
#502 = 0
#503 = #5
#504 = #500
#505 = #503
#601 = [#1/2 - #4]
#602 = [#2/2 - #4]
G90 G0 X# 501 Y#502
Z[#503+#7]
#505 = #505 - #9
N2
#501 = #501+[#10 * #4]
G90 G0 X#501 Y#502 Z[#503+#7]
#502 = #502+[#10 * #4] * [#602/#601]
G1 X-#501 Z#505
X#501 Z#505
N1
#504 = #500
IF [#502 LT #504] THEN #504 = 0
G1 G90 X#501
Y[#502-#504]
G3 X[#501-#504] Y#502 I-#504
G1 X[-#501+#504]
G3 X-#501 Y[#502-#504] J-#504
G1 Y[-#502+#504]
G3 X[-#501+#504] Y-#502 I#504
G1 X[#501-#504]
G3 X#501 Y[-#502+#504] J#504
G91 G1 Y[#502 - #504]
IF [#501 EQ #601] GOTO3
#501 = #501+[#10 * #4]
#502 = #502+[#10 * #4] * [#602/#601]
IF [#501 LT #601] GOTO 1
IF [#501 GE #601] THEN #501=#601 #502=#602
IF [#501 EQ #601] GOTO 1
N3
#501 = 0
#502 = 0
IF [#505 EQ #6] GOTO 4
#503 = #503 - #9
#505 = #505 - #9
IF [#505 GT #6] GOTO 2
IF [#505 LE #6] THEN #505 = #6
IF [#505 EQ #6] GOTO 2
N4
G90 G0 X#501 Y#502 Z[#503+#7]
G90  G0 Z#8
#503 = #5
#504 = #503
M99
%

